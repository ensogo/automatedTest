*** Settings ***
Library           Selenium2Library

*** Test Cases ***
validLogin
    [Template]    valid_loginSteps
    blaze.indy@gmail.com    16123239

invalidLogin_by_incorrect_account
    [Template]    invalidLogin_by_incorrect_account
    invalidmail@enso.com    1122334455666aaq!

*** Keywords ***
valid_loginSteps
    [Arguments]    ${user}    ${pass}
    Open Browser    http://th.beecrazy.hk/?do_access=1    ff
    Click Image    xpath=//html/body/div[4]/div/div/div[1]/img
    Wait Until Element Is Visible    //a[@class="login-modal reg top-pills"]    50
    Click Element    //a[@class="login-modal reg top-pills"]
    Wait Until Element Is Visible    //input[@name="email"]    50
    Input Text    //input[@name="email"]    ${user}
    Input Password    //input[@name="password"]    ${pass}
    Click Button    //button[@id="login-btn"]
    Wait Until Element Is Visible    xpath=//html/body/div[4]/div/div/div[1]/img
    Click Image    xpath=//html/body/div[4]/div/div/div[1]/img
    ${getUserNameFormPage}=    Get Text    xpath=//html/body/div[2]/div[1]/div[1]/div/ul/li[2]/a
    Should Be Equal As Strings    ${getUserNameFormPage}    ${user}
    Mouse Over    xpath=//html/body/div[2]/div[1]/div[1]/div/ul/li[2]/a
    Wait Until Element Is Visible    xpath=//html/body/div[2]/div[1]/div[1]/div/ul/li[2]/ul/li[6]/a
    Click Element    xpath=//html/body/div[2]/div[1]/div[1]/div/ul/li[2]/ul/li[6]/a
    ${logoutMsg}    Get Text    xpath=//html/body/div[2]/div[3]/div[2]/div
    Close Browser

invalidLogin_by_incorrect_account
    [Arguments]    ${user}    ${pass}
    Open Browser    http://th.beecrazy.hk/?do_access=1
    Click Image    css=html body.th.th div#homepage-popup.modal.hide.fade.in div.modal-body div.container div.btnx img
    Click Element    css=html body.th.th div.site-wrapper div.site-nav div.nav-top div.main ul.pull-right li a.login-modal.reg.top-pills
    Input Text    css =#login-form input[name="email"]    ${user}
    Input Password    css=#login-form input[name="password"]    ${pass}
    Click Button    css=#login-form button[id="login-btn"]
    Wait Until Page Contains Element    css=#login-message div[id="login-message-content"]    10
    Element Should Be Visible    css=#login-message div[id="login-message-content"]
    Close Browser
